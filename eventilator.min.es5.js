"use strict";(function(m){var a=function e(b){for(var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b.length,c=arguments.length,f=Array(2<c?c-2:0),d=2;d<c;d++)f[d-2]=arguments[d];return a<=f.length?b.apply(void 0,f):e.bind.apply(e,[void 0,b,a].concat(f))},b=function a(c,b,d,f){function g(){f.call.apply(f,[this].concat(Array.prototype.slice.call(arguments),[b])),k.once&&k()}var i=!!(4<arguments.length&&arguments[4]!==void 0)&&arguments[4];if("string"==typeof b&&(b=m.document.querySelectorAll(b),b=1===b.length?b[0]:Array.from(b)),Array.isArray(b)?!b.length:!b.addEventListener)throw new Error("nil/empty event target(s)");var h=null!=d&&d.constructor===Object;if(null==d||!(h||"string"==typeof d))throw new TypeError("cannot listen to nil or invalid event type");if(Array.isArray(b)){for(var j=0;j<b.length;j++)b[j]=a(c,b[j],h?Object.assign({},d):d,f,i);return b}if(h){for(var o in d)d[o]=a(c,b,o,d[o],i);return b.off=function(){var a=!0,c=!1,d=void 0;try{for(var e,f,g=b[Symbol.iterator]();!(a=(e=g.next()).done);a=!0)f=e.value,f()}catch(a){c=!0,d=a}finally{try{a||null==g.return||g.return()}finally{if(c)throw d}}return b},b.on=function(c){var a=!0,d=!1,e=void 0;try{for(var f,g,h=b[Symbol.iterator]();!(a=(f=h.next()).done);a=!0)g=f.value,g.on(c)}catch(a){d=!0,e=a}finally{try{a||null==h.return||h.return()}finally{if(d)throw e}}return b},d}var p=function(c){return null!=c&&c!==k.once&&(k.once=!!c),b.addEventListener(d,g,i),k.ison=!0,k},k=Object.assign(function(){return b.removeEventListener(d,g),k.ison=!1,k},{target:b,on:p,once:c,emit:n.emit.bind(b,b)});return k.off=k,p()},n=a(b,3);if(n.curry=a,n.once=b.bind(null,!0),n.on=b.bind(null,!1),n.emit=function(a,b,c){a.dispatchEvent(new m.CustomEvent(b,{detail:c}))},m.Proxy){var c={get:function(f,a){return function(b,c,d){return f(b,a,c,d)}}};n.once=new m.Proxy(n.once,c),n.on=new m.Proxy(n.on,c)}"undefined"==typeof module?m.define instanceof Function&&m.define.amd?m.define(["eventilator"],function(){return n}):m.eventilator=n:module.exports=n})("undefined"==typeof global?window:global);